# iOS 问题修复说明

## 已修复的问题

### 1. UIScene lifecycle 警告

**问题：**
```
UIScene lifecycle will soon be required
```

**解决方案：**
- 在 `AppDelegate.swift` 中添加了 `application(_:configurationForConnecting:options:)` 方法，返回 `nil` 来禁用 Scene lifecycle
- 继续使用传统的 App-based lifecycle，这对 Flutter 应用来说已经足够

### 2. mprotect 权限错误

**问题：**
```
mprotect error: 13 (Permission denied)
```

**可能的原因和解决方案：**

#### 原因1：代码签名问题
如果是在真机上运行，确保：
1. 在 Xcode 中正确配置了签名
2. 设备已信任开发者证书
3. 在设备设置中：设置 > 通用 > VPN与设备管理 > 信任开发者

#### 原因2：Flutter 引擎版本问题
这个错误有时是 Flutter 引擎的已知问题，特别是在某些 iOS 版本上。

**临时解决方案：**
1. 清理构建缓存：
```bash
cd /Users/mac/Documents/code/LingoGo/lingo_flutter
flutter clean
flutter pub get
cd ios
pod install
cd ..
```

2. 使用 Release 模式运行（有时可以避免这个问题）：
```bash
flutter run --release
```

3. 如果问题持续，可以尝试：
   - 重启设备
   - 重新安装应用
   - 检查 Xcode 和 Flutter 版本是否兼容

#### 原因3：设备权限
确保应用有必要的权限：
- 在 `Info.plist` 中已配置必要的权限说明

## 验证修复

重新运行应用：
```bash
cd /Users/mac/Documents/code/LingoGo/lingo_flutter
flutter clean
flutter pub get
cd ios && pod install && cd ..
flutter run
```

## 如果问题仍然存在

1. **检查 Xcode 控制台**：查看是否有其他错误信息
2. **检查设备日志**：在 Xcode 的 Window > Devices and Simulators 中查看设备日志
3. **尝试模拟器**：在模拟器上运行，看是否也有同样的问题
4. **更新 Flutter**：如果可能，考虑更新到更新的 Flutter 版本

## 注意事项

- `mprotect` 错误有时是警告性的，应用可能仍然可以正常运行
- 如果应用功能正常，可以暂时忽略这个错误
- 这个错误通常不会影响应用的正常使用

